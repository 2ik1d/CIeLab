<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>CIELab Mobile Tool</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ffffff">
<link rel="apple-touch-icon" href="icons/icon-192.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>
  body { font-family: sans-serif; margin: 0; padding: 10px; background: #f9f9f9; }
  h2 { text-align: center; }
  .input-group { display: flex; justify-content: space-between; margin: 5px 0; }
  .input-group label { flex: 1; font-size: 14px; }
  .input-group input { flex: 1; font-size: 18px; padding: 5px; margin-left: 5px; }
  button { width: 100%; padding: 12px; font-size: 18px; margin-top: 8px; }
  #metrics { background: #fff; padding: 8px; border-radius: 6px; margin-top: 10px; font-size: 15px; }
</style>
</head>
<body>

<h2>CIELab Mobile Tool</h2>

<div style="background:#fff; padding:10px; border-radius:8px;">
  <h3>Эталон Reference</h3>
  <div class="input-group"><label>L*:</label><input id="L1" type="number" value="55"></div>
  <div class="input-group"><label>a*:</label><input id="a1" type="number" value="20"></div>
  <div class="input-group"><label>b*:</label><input id="b1" type="number" value="30"></div>

  <h3>Образец Sample</h3>
  <div class="input-group"><label>L*:</label><input id="L2" type="number" value="53.5"></div>
  <div class="input-group"><label>a*:</label><input id="a2" type="number" value="18"></div>
  <div class="input-group"><label>b*:</label><input id="b2" type="number" value="25"></div>

  <button onclick="updatePlot()">Построить</button>
</div>

<div id="metrics"></div>
<div id="plotAB" style="width:100%; height:400px;"></div>
<div id="plotCL" style="width:100%; height:300px;"></div>

<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js')
      .then(() => console.log('Service Worker зарегистрирован'));
}

function deltaE76(lab1, lab2) {
  return Math.sqrt(
    Math.pow(lab1[0]-lab2[0],2) +
    Math.pow(lab1[1]-lab2[1],2) +
    Math.pow(lab1[2]-lab2[2],2)
  );
}
function labToChroma(lab) { return Math.
